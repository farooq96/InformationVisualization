<html>
   <head>
      <title> Farooq Shaikh - Assignment1</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.9.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.2.1"></script>
      <style>
         body {
         font-family: sans-serif;
         }
      </style>
   </head>
   <body>
      <table style="width: 850px;" cellspacing="5" cellpadding="5">
         <tbody>
            <tr>
               <td style="width: 200px; vertical-align: top;"><strong>Name:&nbsp;</strong></td>
               <td style="vertical-align: top;">Farooq Shaikh</td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Student Number:</strong></td>
               <td style="vertical-align: top;">19200161</td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Dataset description:</strong></td>
			    <td style="vertical-align: top;">
			  <p><a href="https://www.rsa.ie/Documents/NCT/Make%20Model%20Data%202016.csv" target="_blank" rel="noopener">NCT Car Make and Model Data 2016 </a>.</p>
               <p> This data set contains the details of the various performance and safety tests conducted on 
			   all the passenger cars and commercial vehicles by the National Car Testing Service (NCT), Ireland in the year 2016. The data set 
			   provides us the details of the vehicle maker, its model, the year of birth of that model and the results of various tests that were performed 
			   on the vehicle. Furthermore, the dataset also provides detailed information with regards to the various â€˜Fail Items in a particular vehicle model
			   which relates to the instances of that fail item in the total number of vehicles tested. Overall, 12 major fail items were provided in the dataset along 
			   with their percentage failure. Some of the fail items or the component in which failure was detected are Braking equipment, chassis, and body, Suspension 
			   test, light test, Vehicle and safety equipment, etc. </p>
               </td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Initial questions</strong></td>
               <td style="vertical-align: top;"> As vehicles improved with technological advancements, faster speeds were attained which led to more serious accidents. Today, vehicle safety equipment is an important factor while purchasing a car. So which Automobile manufacturers are more concerned with improving car safety and preventing injuries and deaths? How do the vehicles perform in the safety equipment test depending on their year of make? Is it true that newer models from all manufacturers are safer or are there any outliers? </tr>
         </tbody>
      </table>
      <hr />
      <div id="vis"></div>
      <hr />
      <table style="width: 850px;" cellspacing="5" cellpadding="5">
         <tbody>
            <tr>
               <td style="width: 200px; vertical-align: top;"><strong>Description:&nbsp;</strong></td>
               <td style="vertical-align: top;">
			   The graph shows a simple heatmap that encodes the information about the attributes from the dataset, namely, year of birth on X-axis, The maker of the vehicle on the Y-axis and the color is used to show the mean percentage of vehicles that failed the Vehicle safety equipment test. Each rectangle on the heatmap corresponds gives the mean failure percentage of its respective year of make (obtained from the column) and the vehicle manufacturer ( obtained from the row).
			   </td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Insight:</strong></td>
               <td style="vertical-align: top;"> 
			   <p> In general, it can be inferred from the heat map that the percentage of vehicles failing the vehicle safety and equipment test has decreased with the newer models.  This is something is expected because we have become more conscious and aware of how important passenger safety is when choosing a car for ourselves. Thereby the vehicle makers have focussed more on using the technology to improve the safety features being provided in their vehicle which has led to a drop in the number and percentage of vehicles failing the tests. It is also visible that most of the vehicles that failed the test had their year of birth between 1990 and 2004 as we see a lot of dark-colored rectangles in cells corresponding to this period across all the manufacturers.</p> 
<p> While the in general trend suggests the improvement in failure percentage with the year of making this is not the case with all the manufacturers. Toyota, Renault, and Peugeot seem to be the outliers. These 3 vehicle manufacturers have a significantly high average percentage of safety equipment failures even with the newer models (year of birth). All the vehicles having the year of birth of 2015 managed to achieve a failure percentage of less than 3%, the manufacturers of the likes of BMW, Honda, and OPEL had a failure percentage of 0 for 2015 but even for this year, Renault and Peugeot had the failure percentages as high as 16% and 26 % respectively.</p>
<p> We can also infer that BMW, Honda, and Volkswagen have generally performed better than their counterparts for all the year of Birth or make. This goes on to show that these makers have prioritized the vehicle and passenger safety while designing their cars. </p>
			   </td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Design considerations</strong></td>
               <td style="vertical-align: top;">
			  <p> Heatmaps visualize data through variations in coloring and It allowed me to show how the average percentage of failure has changed by the year of birth. Heatmaps are self-explanatory and are a great way to show a general view of data hence I decided to use it for the visualization. It one of the limitations of the heatmaps that they do not give the detailed numeric value of the data but in this case, I wanted to show the general trend and compare one vehicle manufacturer to the other for one particular year of birth of the vehicle. Because of the reliance on color to communicate values, I believe Heat Maps were perhaps the most suited type of visualization for a generalized view of numeric values as colors are easier to distinguish and make sense of than raw numbers. Nevertheless, to overcome the limitation of the heatmap I added the tooltip which provides sufficient information to the user.</p>
			  <p> The other visualization that I considered for answering the same questions was small multiples of line charts though it showed the trend very well it was difficult for me to compare one vehicle manufacturer with the other and I found it difficult to infer much information from it.</p>
            </tr>
            <tr>
               <td style="width: 200px; vertical-align: top;"><strong>Data filtering and transformation:&nbsp;</strong></td>
               <td style="vertical-align: top;"> 
			   I have used two filters for this visualization :
			  <p> 1)	I selected all the vehicles that were having the year of birth after 1990 because before 1990 all the makers had more or less the same average failure percentage.</p>
			  <p> 2)	I have used only the popular Vehicle manufacturers (BMW, Ford, Volkswagen, Toyota, Honda, Opel, Renault, Peugeot) as including every single one of them was not possible as the numbers were large and it made the chart look cluttered. </p>

			   </tr>
         </tbody>
      </table>
      <script type="text/javascript">
               var yourVlSpec =  {
   "$schema": "https://vega.github.io/schema/vega-lite/v4.json",

 "title": {
    "text": "A Heatmap representing Mean percent failure of Vehicle and Safety Equipment for top Manufacturers ",
    "anchor": "middle",
    "fontWeight": 800
  },

  "transform": [{"filter": 
  {"field": "VehicleMake", "oneOf": ["BMW", "FORD","VOLKSWAGEN","TOYOTA","HONDA","OPEL","RENAULT","PEUGEOT" ]}
  }, {"filter": {"field": "YearOfBirth", "timeUnit":"year", "gte": 1990}}],
  "width": 900,
  "height": 700,
  "data": {
    "url": "https://raw.githubusercontent.com/farooq96/InformationVisualization/master/Make%20Model%20Data%202016.csv"
  },
  "mark": "rect",
  "encoding": {
    "x": {
      "timeUnit": "year",
      "field": "YearOfBirth",
      "type": "ordinal",
      "title": "Time",
      "axis": {
        "format": "%Y",
        "labelAngle": 0,
        "labelOverlap": false
      }
    },
    "color": {

      "aggregate": "mean",
      "field": "Vehicle and Safety Equipment %",
      "type": "quantitative",
      "title": "Fail %"
    },
    "y": {
      "field": "VehicleMake",
      "type": "nominal",
      "title": null
    },
    "tooltip": [
      {"field": "YearOfBirth", "timeUnit":"year","type": "ordinal"},
      {"aggregate": "mean", "field": "Vehicle and Safety Equipment %", "type": "quantitative"},
      {"field": "VehicleMake","type": "nominal"}
      
    ]
  }
}
            vegaEmbed("#vis", yourVlSpec);
      </script>
   </body>
</html>